<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIGINSA — Recherche d'utilisateurs</title>
<style>
:root {
  --bg:#0f1724; --card:#0b1220; --muted:#9aa8bf; --accent:#5eead4;
  --radius:12px; --shadow:0 6px 18px rgba(2,6,23,0.6);
  font-family: Inter, sans-serif;
}
* { box-sizing:border-box; margin:0; padding:0; }
body {
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  background: linear-gradient(135deg,#071226,#0f1724);
  color:#e6eef8;
  font-size:16px;
  padding:20px;
}
.container {
  background:var(--card);
  padding:32px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  width:100%;
  max-width:1100px;
}
.header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}
.header-left { text-align:center; flex:1; }
.header-right a {
  display:flex;
  align-items:center;
  gap:8px;
  color:var(--accent);
  text-decoration:none;
  font-weight:600;
}
.header-right a img {
  width:60px;
  height:auto;
  border-radius:50%;
  cursor:pointer;
  transition: transform 0.3s ease, filter 0.3s ease;
}
.header-right a:hover img {
  transform: scale(1.05);
  filter: drop-shadow(0 0 8px var(--accent));
}
.header-right a:hover span { text-decoration:underline; }
.logo { display:block; margin:0 auto 16px auto; width:200px; height:auto; }
.logo:hover { transform: scale(1.05); filter: drop-shadow(0 0 12px var(--accent)); }
.search-bar { margin:16px 0; display:flex; justify-content:center; }
.search-bar input[type="text"] {
  padding:10px 12px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.1);
  background:transparent;
  color:#e6eef8;
  outline:none;
  width:300px;
}
h1, h2 { color:var(--accent); margin-bottom:16px; }
.user-list {
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:24px;
}
.user-card {
  background:rgba(255,255,255,0.03);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
  transition:transform 0.2s ease, box-shadow 0.2s ease;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:16px;
}
.user-card:hover {
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(2,6,23,0.8);
}
.user-card a {
  text-decoration:none;
  color:#e6eef8;
  display:flex;
  align-items:center;
  gap:12px;
  width:100%;
}
.user-card img {
  width:50px;
  height:50px;
  border-radius:50%;
  object-fit:cover;
  border:2px solid var(--accent);
}
.user-card .username {
  font-weight:600;
  color:var(--accent);
  flex:1;
}
.user-id {
  color:var(--muted);
  font-size:14px;
}
a { color:var(--accent); text-decoration:none; }
a:hover { text-decoration:underline; }
.back-link {
  text-align:center;
  margin-top:32px;
}
.back-link a {
  padding:8px 16px;
  background:rgba(94,234,212,0.1);
  border-radius:8px;
  transition:background 0.2s ease;
}
.back-link a:hover {
  background:rgba(94,234,212,0.2);
}
@media (max-width:900px) { .user-list { width:100%; } }
</style>
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <img src="{{ url_for('static', filename='tiger.png') }}" alt="Logo TIGINSA" class="logo">
      <h1>Rechercher des utilisateurs</h1>
    </div>
    <div class="header-right">
      <!-- Lien corrigé vers ton profil -->
      <a href="{{ url_for('routes.profile', username=session['username']) }}">
        <img src="{{ url_for('static', filename='tiger.png') }}" alt="Profil">
        <span>Mon profil</span>
      </a>
    </div>
  </div>

  <!-- Barre de recherche -->
  <div class="search-bar">
    <form method="GET" action="{{ url_for('routes.search') }}">
      <input
        type="text"
        name="q"
        placeholder="Rechercher un utilisateur..."
        value="{{ query if query else '' }}"
        required
      >
    </form>
  </div>

  <!-- Résultats de la recherche -->
  <div class="user-list">
    {% if matched_users %}
      <h2>Résultats</h2>
      {% for user in matched_users %}
      <div class="user-card">
        <!-- Lien corrigé vers le profil de chaque utilisateur -->
        <a href="{{ url_for('routes.profile', username=user.username) }}">
          <img src="{{ url_for('static', filename='tiger.png') }}" alt="{{ user.username }}">
          <div>
            <div class="username">{{ user.username }}</div>
            <div class="user-id">ID: {{ user.id }}</div>
          </div>
        </a>
      </div>
      {% endfor %}
    {% else %}
      <p style="text-align:center; color:var(--muted);">
        {% if query %}
          Aucun utilisateur trouvé pour "{{ query }}".
        {% else %}
          Effectuez une recherche pour trouver des utilisateurs.
        {% endif %}
      </p>
    {% endif %}
  </div>

  <!-- Lien de retour -->
  <div class="back-link">
    <a href="{{ url_for('routes.feed') }}">← Retour au fil d'actualité</a>
  </div>
</div>
</body>
</html>
