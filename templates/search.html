<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIGINSA — Recherche d'utilisateurs</title>
<style>
:root {
  --bg:#0f1724; --card:#0b1220; --muted:#9aa8bf; --accent:#5eead4;
  --radius:12px; --shadow:0 6px 18px rgba(2,6,23,0.6);
  font-family: Inter, sans-serif;
}
* { box-sizing:border-box; margin:0; padding:0; }

body {
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  background: linear-gradient(135deg,#071226,#0f1724);
  color:#e6eef8;
  font-size:16px;
  padding:20px;
}

.container {
  background:var(--card);
  padding:32px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  width:100%;
  max-width:1100px;
}

/* Header top avec profil */
.header-top {
  display:flex;
  justify-content:flex-end;
  align-items:center;
  margin-bottom:12px;
}

.profile-shortcut {
  display:flex;
  align-items:center;
  gap:10px;
  text-decoration:none;
  color:var(--accent);
  font-weight:600;
  transition:0.2s;
}
.profile-shortcut svg {
  width:70px;
  height:70px;
  cursor:pointer;
  transition: transform 0.3s ease, filter 0.3s ease;
}
.profile-shortcut:hover svg {
  transform: scale(1.05);
  filter: drop-shadow(0 0 12px var(--accent));
}

/* Header central */
.header-center {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  margin-bottom:24px;
}

.logo {
  width:200px;
  margin-bottom:4px;
  transition:0.3s;
}
.logo:hover {
  transform:scale(1.05);
  filter: drop-shadow(0 0 12px var(--accent));
}

/* Barre de recherche */
.search-bar {
  width:100%;
  max-width:420px;
  position:relative;
}
.search-bar input {
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.05);
  color:#e6eef8;
  outline:none;
}

/* Résultats */
.user-list {
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:8px;
}
.user-card {
  background:rgba(255,255,255,0.03);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}
.user-card:hover {
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(2,6,23,0.8);
}
.user-card a {
  display:flex;
  align-items:center;
  gap:16px;
  text-decoration:none;
  color:#e6eef8;
}
.user-card img {
  width:50px;
  height:50px;
  border-radius:50%;
  border:2px solid var(--accent);
  object-fit:cover;
}
.username {
  font-weight:600;
  color:var(--accent);
}
.user-id {
  color:var(--muted);
  font-size:14px;
}

.back-link {
  text-align:center;
  margin-top:32px;
}
.back-link a {
  padding:8px 16px;
  background:rgba(94,234,212,0.1);
  border-radius:8px;
  transition:background 0.2s ease;
  text-decoration:none;
  color:var(--accent);
}
.back-link a:hover {
  background:rgba(94,234,212,0.2);
}
</style>
</head>
<body>

<div class="container">

  <!-- Profil en haut à droite -->
  <div class="header-top">
    <a href="{{ url_for('routes.profile', username=session['username']) }}" class="profile-shortcut">
      <svg viewBox="0 0 24 24" fill="none" style="filter: drop-shadow(0 0 10px #5eead4);">
        <circle cx="12" cy="12" r="10" stroke="#5eead4" stroke-width="0.8" style="filter: blur(3px); opacity:0.55;"></circle>
        <circle cx="12" cy="12" r="9" stroke="#5eead4" stroke-width="1.5"/>
        <circle cx="12" cy="8" r="3.2" stroke="#5eead4" stroke-width="1.6"/>
        <path d="M5.5 19.5c1.4-3.5 4.3-5.5 6.5-5.5s5.1 2 6.5 5.5" stroke="#5eead4" stroke-width="1.6" stroke-linecap="round"/>
      </svg>
    </a>
  </div>

  <!-- Logo + barre -->
  <div class="header-center">
    <img src="{{ url_for('static', filename='tiger.png') }}" alt="TIGINSA" class="logo">

    <div class="search-bar">
      <form method="GET" action="{{ url_for('routes.search') }}">
        <input
          type="text"
          name="q"
          placeholder="Rechercher un utilisateur..."
          value="{{ query if query else '' }}"
          required
        >
      </form>
    </div>
  </div>

  <h2 style="text-align:center; margin-bottom:16px;">Résultats</h2>

  <!-- Résultats -->
  <div class="user-list">
    {% if matched_users %}
      {% for user in matched_users %}
      <div class="user-card">
        <a href="{{ url_for('routes.profile', username=user.username) }}">
          <img src="{{ url_for('static', filename='tiger.png') }}" alt="{{ user.username }}">
          <div>
            <div class="username">{{ user.username }}</div>
            <div class="user-id">ID: {{ user.id }}</div>
          </div>
        </a>
      </div>
      {% endfor %}
    {% else %}
      <p style="text-align:center; color:var(--muted); margin-top:24px;">
        {% if query %}
          Aucun utilisateur trouvé pour "{{ query }}".
        {% else %}
          Saisissez un nom pour commencer la recherche.
        {% endif %}
      </p>
    {% endif %}
  </div>

  <!-- Retour -->
  <div class="back-link">
    <a href="{{ url_for('routes.feed') }}">← Retour au fil d'actualité</a>
  </div>

</div>

</body>
</html>
